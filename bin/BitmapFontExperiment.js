var BUILD="debug";
(function(){function h(){}var c;h.main=function(){var a=new h;window.HTMLCanvasElement?a.initialize():alert("Your browser does not support HTML5 Canvas.")};h.prototype.initialize=function(){this.mainCanvas=document.getElementById("mainCanvas");this.mainStage=new createjs.Stage(this.mainCanvas);this.mainStage.snapToPixelsEnabled=!1;this.count=0;loader=new createjs.LoadQueue;loader.loadFile("cooper.png");loader.loadFile("cooper.xml");var a=this;loader.on("fileload",function(b){b.item.type==createjs.AbstractLoader.IMAGE&&
(a.bitmap=b.result);b.item.type==createjs.AbstractLoader.XML&&(a.xml=b.result)});loader.on("complete",function(b){c=new BitmapFont(a.bitmap,a.xml,32);BitmapTextField.registerBitmapFont(c,"cooper");b=new BitmapTextField(200,100,"Bitmap text","cooper",-1,0,0,"left","top",!0);b.showBorder();b.x=10;b.y=10;a.mainStage.addChild(b);b=new BitmapTextField(200,100,"Bitmap text","cooper",-1,0,0,"right","top",!0);b.showBorder();b.x=220;b.y=10;a.mainStage.addChild(b);b=new BitmapTextField(200,100,"Bitmap text",
"cooper",-1,0,0,"center","top",!0);b.showBorder();b.x=430;b.y=10;a.mainStage.addChild(b);b=new BitmapTextField(200,100,"Bitmap text","cooper",-1,0,0,"center","center",!0);b.showBorder();b.x=10;b.y=120;a.mainStage.addChild(b);b=new BitmapTextField(200,100,"Bitmap text and multiline text","cooper",-1,0,0,"center","center",!0);b.showBorder();b.x=220;b.y=120;a.mainStage.addChild(b);b=new BitmapTextField(200,100,"Bitmap text and multiline text","cooper",-1,0,0,"left","center",!0);b.showBorder();b.x=430;
b.y=120;a.mainStage.addChild(b);b=new BitmapTextField(200,100,"Bitmap text and multiline text","cooper",-1,0,0,"right","center",!0);b.showBorder();b.x=10;b.y=240;a.mainStage.addChild(b);b=new BitmapTextField(200,100,"you can change the color also","cooper",-1,0,0,"center","center",!0);b.setColor("#009900");b.x=220;b.y=240;a.mainStage.addChild(b);a.score=0;a.scoreText=new BitmapTextField(200,50,"Score: "+a.score,"cooper",-1,0,0,"right","center",!0);a.scoreText.x=200;a.scoreText.y=360;a.mainStage.addChild(a.scoreText)});
createjs.Ticker.timingMode=createjs.Ticker.RAF;createjs.Ticker.addEventListener("tick",function(b){null!=a.scoreText&&(a.count++,5<a.count&&(a.count=0,a.score++,a.scoreText.setText("Score: "+a.score)));a.mainStage.update()})};window.Main=h})();(function(h){BitmapChar=function(c,a,b,l,f){this.mTexture=a;this.mCharId=c;this.mXOffset=b;this.mYOffset=l;this.mXAdvance=f;this.mKernings=null};BitmapChar.prototype.addKerning=function(c,a){null==this.mKernings&&(this.mKernings=[]);this.mKernings[c]=a};BitmapChar.prototype.getKerning=function(c){return null==this.mKernings||null==this.mKernings[c]||void 0==this.mKernings[c]?0:this.mKernings[c]};BitmapChar.prototype.createImage=function(){return this.mTexture.clone()};BitmapChar.prototype.getCharId=
function(){return this.mCharId};BitmapChar.prototype.getXOffset=function(){return this.mXOffset};BitmapChar.prototype.getYOffset=function(){return this.mYOffset};BitmapChar.prototype.getXAdvance=function(){return this.mXAdvance};BitmapChar.prototype.getTexture=function(){return this.mTexture};BitmapChar.prototype.getWidth=function(){return this.mTexture.spriteSheet.getFrame(this.mTexture.currentFrame).rect.width};BitmapChar.prototype.getHeight=function(){return this.mTexture.spriteSheet.getFrame(this.mTexture.currentFrame).rect.height};
h.BitmapChar=BitmapChar})(window);(function(h){BitmapFont=function(c,a,b){this.mName="unknown";this.mLineHeight=this.mSize=this.mBaseLine=b;this.mTexture=c;this.mChars=[];this.mHelperImage=new createjs.Bitmap(c);this.mCharLocationPool=[];a&&this.parseFontXml(a);this.textHeight=this.textWidth=0;this.previousWidth=[]};BitmapFont.NATIVE_SIZE=-1;BitmapFont.MINI="mini";BitmapFont.CHAR_SPACE=32;BitmapFont.CHAR_TAB=9;BitmapFont.CHAR_NEWLINE=10;BitmapFont.CHAR_CARRIAGE_RETURN=13;BitmapFont.prototype.parseFontXml=function(c){for(var a=c.childNodes[0].getElementsByTagName("chars")[0].getElementsByTagName("char"),
b=[],l={},f=[],g=[],e=0;e<a.length;e++){var d={};d.id=a[e].getAttribute("id");a[e].getAttribute("id");d.x=a[e].getAttribute("x");d.y=a[e].getAttribute("y");d.xAdvance=a[e].getAttribute("xadvance");d.xOffset=a[e].getAttribute("xoffset");d.yOffset=a[e].getAttribute("yoffset");d.width=a[e].getAttribute("width");d.height=a[e].getAttribute("height");b.push([d.x,d.y,d.width,d.height]);l["frame"+e]=[e];f.push(d)}spriteSheet=new createjs.SpriteSheet({images:[this.mTexture],frames:b,animations:l});for(d=0;d<
f.length;d++)a=new createjs.Sprite(spriteSheet),a.gotoAndStop(d),a.x=800*Math.random(),a.y=100,a=new BitmapChar(f[d].id,a,f[d].xOffset,f[d].yOffset,f[d].xAdvance),this.addChar(f[d].id,a);if(null!=c.childNodes[0].getElementsByTagName("kernings")[0])for(c=c.childNodes[0].getElementsByTagName("kernings")[0].getElementsByTagName("kerning"),f=0;f<c.length;f++)d={},d.first=c[f].getAttribute("first"),d.second=c[f].getAttribute("second"),d.amount=c[f].getAttribute("amount"),g.push(d),d.second in this.mChars&&
this.getChar(d.second).addKerning(d.first,d.amount)};BitmapFont.prototype.getChar=function(c){return this.mChars[c]};BitmapFont.prototype.addChar=function(c,a){this.mChars[c]=a};BitmapFont.prototype.createSprite=function(c,a,b,l,f,g,e,d,h,m){null==l&&(l=-1);null==e&&(e="center");null==d&&(d="center");null==h&&(h=!0);null==m&&(m=!0);c=this.arrangeChars(c,a,b,l,e,d,h,m,g);a=c.length;b=new createjs.Container;for(l=0;l<a;l++)g=c[l],e=g._char.createImage(),e.x=g.x+l*f,e.y=g.y,e.scaleX=e.scaleY=g.scale,
b.addChild(e),g=g._char.getHeight()*g.scale,g>this.textHeight&&(this.textHeight=g);return b};BitmapFont.prototype.arrangeChars=function(c,a,b,l,f,g,e,d,h){null==l&&(l=-1);null==f&&(f="center");null==g&&(g="center");null==e&&(e=!0);null==d&&(d=!0);if(null==b||0==b.length)return[];0>l&&(l*=-this.mSize);for(var m=[[]],p=!1,k={},r=0,z=0,q=0,w=0;!p;){w=l/this.mSize;z=c/w;q=a/w;m=[];m.push([]);if(this.mLineHeight<=q)for(var y=-1,A=-1,x=0,s=0,t=[],r=b.length,n=0;n<r;++n){var B=!1,v=b.charCodeAt(n),u=this.getChar(v);
if(v==BitmapFont.CHAR_NEWLINE||v==BitmapFont.CHAR_CARRIAGE_RETURN)B=!0;else if(null==u)console.log("[BitmapFont] Missing character: "+v);else{if(v==BitmapFont.CHAR_SPACE||v==BitmapFont.CHAR_TAB)y=n;d&&(x=u.getKerning(A)/1+x/1);k=new CharLocation(u);k._char=u;k.x=x/1+u.getXOffset()/1;k.y=s/1+u.getYOffset()/1;t.push(k);x+=u.getXAdvance()/1;A=v;if(k.x+Number(u.getWidth())>z){k=-1==y?1:n-y;t.splice(t.length-k,k);if(0==t.length)break;n-=k;B=!0}}if(n==r-1)m.push(t),p=!0;else if(B)if(m.push(t),y==n&&t.pop(),
s+2*this.mLineHeight<=q)t=[],x=0,s+=this.mLineHeight,A=y=-1;else break}e&&!p?(l-=1,m.length=0):p=!0}c=[];n=m.length;r=s+this.mLineHeight;s=0;g==VAlign.BOTTOM?s=q-r:g==VAlign.CENTER&&(s=(q-r)/2);this.previousWidth=[];for(g=0;g<n;++g)if(q=m[g],r=q.length,0!=r){a=0;k=q[q.length-1];k=k.x-k._char.getXOffset()/1+k._char.getXAdvance()/1;f==HAlign.RIGHT?a=z-k:f==HAlign.CENTER&&(a=(z-k)/2);for(b=this.width=0;b<r;++b)k=q[b],this.width+=k._char.getXAdvance()/1+k._char.getXOffset()/1+1,k.x=w*(k.x+a),k.y=w*(k.y+
s+(g-1)*h),k.scale=w,0<k._char.getWidth()&&0<k._char.getHeight()&&c.push(k),this.mCharLocationPool.push(k);this.previousWidth.push(this.width)}this.width=this.previousWidth[0];for(n=1;n<this.previousWidth.length;n++)this.previousWidth[n]>this.width&&(this.width=this.previousWidth[n]);return c};BitmapFont.prototype.getName=function(){return this.mName};BitmapFont.prototype.getSize=function(){return this.mSize};BitmapFont.prototype.getLineHeight=function(){return this.mLineHeight};BitmapFont.prototype.setLineHeight=
function(c){this.mLineHeight=c};BitmapFont.prototype.getBaseLine=function(){return this.mBaseLine};BitmapFont.prototype.getWidth=function(){return this.width};BitmapFont.prototype.getHeight=function(){return this.textHeight};h.BitmapFont=BitmapFont})(window);(function(h){BitmapTextField=function(a,b,c,f,g,e,d,h,m,p){this.Container_constructor();this.font=null;null==e&&(e=1);null==d&&(d=1);null==h&&(h="center");null==m&&(m="center");null==p&&(p=!0);this.hAlign=h;this.vAlign=m;this.autoScale=p;this.color="";this.initialize(a,b,c,f,g,e,d,h,m,p);this.containerWidth=a;this.containerHeight=b;this.fontSize=g;this.horizantalLetterSpacing=e;this.verticalLetterSpacing=d};BitmapTextField.bitmapFonts=[];var c=createjs.extend(BitmapTextField,createjs.Container);c.initialize=
function(a,b,c,f,g,e,d,h,m,p){c=String(c);this.border=new createjs.Shape;this.border.graphics.setStrokeStyle(1);this.border.graphics.beginStroke(createjs.Graphics.getRGB(255,0,0));this.border.graphics.drawRect(0,0,a,b);this.addChild(this.border);this.border.visible=!1;this.textContainer=new createjs.Container;this.addChild(this.textContainer);BitmapTextField.bitmapFonts[f]?(this.font=BitmapTextField.bitmapFonts[f],a=this.font.createSprite(a,b,c,g,e,d,h,m,p,!0),this.actualWidth=this.font.getWidth(),
this.textContainer.addChild(a)):console.log("BitmapTextField: Font is not registered "+f)};c.setText=function(a){a=String(a);this.textContainer.uncache();this.textContainer.removeAllChildren();a=this.font.createSprite(this.containerWidth,this.containerHeight,a,this.fontSize,this.horizantalLetterSpacing,this.verticalLetterSpacing,this.hAlign,this.vAlign,this.autoScale,!0);this.textContainer.addChild(a);""!=this.color&&this.setColor(this.color);this.actualWidth=this.font.getWidth()};c.getWidth=function(){return this.containerWidth};
c.getHeight=function(){return this.containerHeight};c.getActualWidth=function(){return this.actualWidth};c.showBorder=function(a){null==a&&(a=!0);this.border.visible=a};c.setColor=function(a){function b(a){return"#"==a.charAt(0)?a.substring(1,7):a}var c=parseInt(b(a).substring(0,2),16),f=parseInt(b(a).substring(2,4),16),g=parseInt(b(a).substring(4,6),16);a!=this.color&&(this.colorFilter=new createjs.ColorFilter(0,0,0,1,c,f,g,0));this.textContainer.filters=[this.colorFilter];this.textContainer.cache(0,
0,this.containerWidth,this.containerHeight);this.color=a};BitmapTextField.registerBitmapFont=function(a,b){if(null==BitmapTextField.bitmapFonts[b])return BitmapTextField.bitmapFonts[b]=a,b;console.log(b+" : is already registered")};h.BitmapTextField=createjs.promote(BitmapTextField,"Container")})(window);(function(h){CharLocation=function(c){this._char=c;this._char=null;this.y=this.x=this.scale=0};h.CharLocation=CharLocation})(window);(function(h){HAlign=function(){};HAlign.CENTER="center";HAlign.LEFT="left";HAlign.RIGHT="right";h.HAlign=HAlign})(window);(function(h){VAlign=function(){};VAlign.BOTTOM="bottom";VAlign.TOP="top";VAlign.CENTER="center";h.VAlign=VAlign})(window);
