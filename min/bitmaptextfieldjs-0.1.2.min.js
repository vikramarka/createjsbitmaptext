(function(k){BitmapChar=function(b,a,l,g,e){this.mTexture=a;this.mCharId=b;this.mXOffset=l;this.mYOffset=g;this.mXAdvance=e;this.mKernings=null};BitmapChar.prototype.addKerning=function(b,a){null==this.mKernings&&(this.mKernings=[]);this.mKernings[b]=a};BitmapChar.prototype.getKerning=function(b){return null==this.mKernings||null==this.mKernings[b]||void 0==this.mKernings[b]?0:this.mKernings[b]};BitmapChar.prototype.createImage=function(){return this.mTexture.clone()};BitmapChar.prototype.getCharId=
function(){return this.mCharId};BitmapChar.prototype.getXOffset=function(){return this.mXOffset};BitmapChar.prototype.getYOffset=function(){return this.mYOffset};BitmapChar.prototype.getXAdvance=function(){return this.mXAdvance};BitmapChar.prototype.getTexture=function(){return this.mTexture};BitmapChar.prototype.getWidth=function(){return this.mTexture.spriteSheet.getFrame(this.mTexture.currentFrame).rect.width};BitmapChar.prototype.getHeight=function(){return this.mTexture.spriteSheet.getFrame(this.mTexture.currentFrame).rect.height};
k.BitmapChar=BitmapChar})(window);
(function(k){BitmapFont=function(b,a,l){this.mName="unknown";this.mLineHeight=this.mSize=this.mBaseLine=l;this.mTexture=b;this.mChars=[];this.mHelperImage=new createjs.Bitmap(b);this.mCharLocationPool=[];a&&this.parseFontXml(a);this.textHeight=this.textWidth=0;this.previousWidth=[]};BitmapFont.NATIVE_SIZE=-1;BitmapFont.MINI="mini";BitmapFont.CHAR_SPACE=32;BitmapFont.CHAR_TAB=9;BitmapFont.CHAR_NEWLINE=10;BitmapFont.CHAR_CARRIAGE_RETURN=13;BitmapFont.prototype.parseFontXml=function(b){for(var a=b.childNodes[0].getElementsByTagName("chars")[0].getElementsByTagName("char"),
l=[],g={},e=[],f=[],d=0;d<a.length;d++){var c={};c.id=a[d].getAttribute("id");a[d].getAttribute("id");c.x=a[d].getAttribute("x");c.y=a[d].getAttribute("y");c.xAdvance=a[d].getAttribute("xadvance");c.xOffset=a[d].getAttribute("xoffset");c.yOffset=a[d].getAttribute("yoffset");c.width=a[d].getAttribute("width");c.height=a[d].getAttribute("height");l.push([c.x,c.y,c.width,c.height]);g["frame"+d]=[d];e.push(c)}spriteSheet=new createjs.SpriteSheet({images:[this.mTexture],frames:l,animations:g});for(c=0;c<
e.length;c++)a=new createjs.Sprite(spriteSheet),a.gotoAndStop(c),a.x=800*Math.random(),a.y=100,a=new BitmapChar(e[c].id,a,e[c].xOffset,e[c].yOffset,e[c].xAdvance),this.addChar(e[c].id,a);if(null!=b.childNodes[0].getElementsByTagName("kernings")[0])for(b=b.childNodes[0].getElementsByTagName("kernings")[0].getElementsByTagName("kerning"),e=0;e<b.length;e++)c={},c.first=b[e].getAttribute("first"),c.second=b[e].getAttribute("second"),c.amount=b[e].getAttribute("amount"),f.push(c),c.second in this.mChars&&
this.getChar(c.second).addKerning(c.first,c.amount)};BitmapFont.prototype.getChar=function(b){return this.mChars[b]};BitmapFont.prototype.addChar=function(b,a){this.mChars[b]=a};BitmapFont.prototype.createSprite=function(b,a,l,g,e,f,d,c,z,m){null==g&&(g=-1);null==d&&(d="center");null==c&&(c="center");null==z&&(z=!0);null==m&&(m=!0);b=this.arrangeChars(b,a,l,g,d,c,z,m,f);a=b.length;l=new createjs.Container;for(g=0;g<a;g++)f=b[g],d=f._char.createImage(),d.x=f.x+g*e,d.y=f.y,d.scaleX=d.scaleY=f.scale,
l.addChild(d),f=f._char.getHeight()*f.scale,f>this.textHeight&&(this.textHeight=f);return l};BitmapFont.prototype.arrangeChars=function(b,a,l,g,e,f,d,c,z){null==g&&(g=-1);null==e&&(e="center");null==f&&(f="center");null==d&&(d=!0);null==c&&(c=!0);if(null==l||0==l.length)return[];0>g&&(g*=-this.mSize);for(var m=[[]],k=!1,h={},q=0,B=0,p=0,x=0;!k;){x=g/this.mSize;B=b/x;p=a/x;m=[];m.push([]);if(this.mLineHeight<=p)for(var A=-1,C=-1,y=0,r=0,t=[],q=l.length,n=0;n<q;++n){var D=!1,v=l.charCodeAt(n),u=this.getChar(v);
if(v==BitmapFont.CHAR_NEWLINE||v==BitmapFont.CHAR_CARRIAGE_RETURN)D=!0;else if(null==u)console.log("[BitmapFont] Missing character: "+v);else{if(v==BitmapFont.CHAR_SPACE||v==BitmapFont.CHAR_TAB)A=n;c&&(y=u.getKerning(C)/1+y/1);h=new CharLocation(u);h._char=u;h.x=y/1+u.getXOffset()/1;h.y=r/1+u.getYOffset()/1;t.push(h);y+=u.getXAdvance()/1;C=v;if(h.x+Number(u.getWidth())>B){h=-1==A?1:n-A;t.splice(t.length-h,h);if(0==t.length)break;n-=h;D=!0}}if(n==q-1)m.push(t),k=!0;else if(D)if(m.push(t),A==n&&t.pop(),
r+2*this.mLineHeight<=p)t=[],y=0,r+=this.mLineHeight,C=A=-1;else break}d&&!k?(--g,m.length=0):k=!0}b=[];n=m.length;q=r+this.mLineHeight;r=0;f==VAlign.BOTTOM?r=p-q:f==VAlign.CENTER&&(r=(p-q)/2);this.previousWidth=[];for(f=0;f<n;++f)if(p=m[f],q=p.length,0!=q){a=0;h=p[p.length-1];h=h.x-h._char.getXOffset()/1+h._char.getXAdvance()/1;e==HAlign.RIGHT?a=B-h:e==HAlign.CENTER&&(a=(B-h)/2);for(l=this.width=0;l<q;++l)h=p[l],this.width+=h._char.getXAdvance()/1+h._char.getXOffset()/1+1,h.x=x*(h.x+a),h.y=x*(h.y+
r+(f-1)*z),h.scale=x,0<h._char.getWidth()&&0<h._char.getHeight()&&b.push(h),this.mCharLocationPool.push(h);this.previousWidth.push(this.width)}this.width=this.previousWidth[0];for(n=1;n<this.previousWidth.length;n++)this.previousWidth[n]>this.width&&(this.width=this.previousWidth[n]);return b};BitmapFont.prototype.getName=function(){return this.mName};BitmapFont.prototype.getSize=function(){return this.mSize};BitmapFont.prototype.getLineHeight=function(){return this.mLineHeight};BitmapFont.prototype.setLineHeight=
function(b){this.mLineHeight=b};BitmapFont.prototype.getBaseLine=function(){return this.mBaseLine};BitmapFont.prototype.getWidth=function(){return this.width};BitmapFont.prototype.getHeight=function(){return this.textHeight};k.BitmapFont=BitmapFont})(window);
(function(k){BitmapTextField=function(a,b,g,e,f,d,c,k,m,w){this.Container_constructor();this.font=null;null==d&&(d=1);null==c&&(c=1);null==k&&(k="center");null==m&&(m="center");null==w&&(w=!0);this.hAlign=k;this.vAlign=m;this.autoScale=w;this.color="";this.initialize(a,b,g,e,f,d,c,k,m,w);this.containerWidth=a;this.containerHeight=b;this.fontSize=f;this.horizantalLetterSpacing=d;this.verticalLetterSpacing=c};BitmapTextField.bitmapFonts=[];var b=createjs.extend(BitmapTextField,createjs.Container);b.initialize=
function(a,b,g,e,f,d,c,k,m,w){g=String(g);this.border=new createjs.Shape;this.border.graphics.setStrokeStyle(1);this.border.graphics.beginStroke(createjs.Graphics.getRGB(255,0,0));this.border.graphics.drawRect(0,0,a,b);this.addChild(this.border);this.border.visible=!1;this.textContainer=new createjs.Container;this.addChild(this.textContainer);BitmapTextField.bitmapFonts[e]?(this.font=BitmapTextField.bitmapFonts[e],a=this.font.createSprite(a,b,g,f,d,c,k,m,w,!0),this.actualWidth=this.font.getWidth(),
this.textContainer.addChild(a)):console.log("BitmapTextField: Font is not registered "+e)};b.setText=function(a){a=String(a);this.textContainer.uncache();this.textContainer.removeAllChildren();a=this.font.createSprite(this.containerWidth,this.containerHeight,a,this.fontSize,this.horizantalLetterSpacing,this.verticalLetterSpacing,this.hAlign,this.vAlign,this.autoScale,!0);this.textContainer.addChild(a);""!=this.color&&this.setColor(this.color);this.actualWidth=this.font.getWidth()};b.getWidth=function(){return this.containerWidth};
b.getHeight=function(){return this.containerHeight};b.getActualWidth=function(){return this.actualWidth};b.showBorder=function(a){null==a&&(a=!0);this.border.visible=a};b.setColor=function(a){function b(a){return"#"==a.charAt(0)?a.substring(1,7):a}var g=parseInt(b(a).substring(0,2),16),e=parseInt(b(a).substring(2,4),16),f=parseInt(b(a).substring(4,6),16);a!=this.color&&(this.colorFilter=new createjs.ColorFilter(0,0,0,1,g,e,f,0));this.textContainer.filters=[this.colorFilter];this.textContainer.cache(0,
0,this.containerWidth,this.containerHeight);this.color=a};BitmapTextField.registerBitmapFont=function(a,b){if(null==BitmapTextField.bitmapFonts[b])return BitmapTextField.bitmapFonts[b]=a,b;console.log(b+" : is already registered")};k.BitmapTextField=createjs.promote(BitmapTextField,"Container")})(window);(function(k){CharLocation=function(b){this._char=b;this._char=null;this.y=this.x=this.scale=0};k.CharLocation=CharLocation})(window);
(function(k){HAlign=function(){};HAlign.CENTER="center";HAlign.LEFT="left";HAlign.RIGHT="right";k.HAlign=HAlign})(window);(function(k){VAlign=function(){};VAlign.BOTTOM="bottom";VAlign.TOP="top";VAlign.CENTER="center";k.VAlign=VAlign})(window);